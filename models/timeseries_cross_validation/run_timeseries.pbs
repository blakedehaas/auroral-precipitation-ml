#!/bin/bash
#PBS -N auroral_precip_ml_sweep
#PBS -A UCUL0008
#PBS -l select=1:ncpus=4:ngpus=1:mem=32GB
#PBS -l walltime=24:00:00
#PBS -q casper
#PBS -j oe
#PBS -m abe
#PBS -M blake.dehaas@lasp.colorado.edu

module load cuda/11.2
module load python/3.8.5
module load pytorch/1.8.1

cd $PBS_O_WORKDIR

nvidia-smi

# Install all dependencies used in the script
pip install --user pandas numpy torch scikit-learn tqdm wandb matplotlib

# Replace with your actual sweep ID
SWEEP_ID="your_sweep_id_here"  # e.g., username/project_name/sweep_id

# Run the W&B agent
wandb agent $SWEEP_ID

echo "Job completed at $(date)"
